!function(){var e={},t=(e={BOARD_SIZE:4,EMPTY_CELL:0,NEW_TILE_VALUES:{TWO:2,FOUR:4},PROBABILITY_TWO:.9,WIN_TILE:2048,GAME_STATUS:{IDLE:"idle",PLAYING:"playing",WIN:"win",LOSE:"lose"},KEY_CODES:{LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown"}}).KEY_CODES,r=e.GAME_STATUS;function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=e.BOARD_SIZE,n=e.EMPTY_CELL,o=e.NEW_TILE_VALUES,u=e.PROBABILITY_TWO,l=e.WIN_TILE,d=e.GAME_STATUS,c=new/*#__PURE__*/(function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.size=a,this.status=d.IDLE,this.score=0,this.board=e||this.createEmptyBoard()}return e=[{key:"moveLeft",value:function(){this.slideLeft()&&(this.addRandomNumber(),this.renderCells())}},{key:"moveRight",value:function(){this.slideRight()&&(this.addRandomNumber(),this.renderCells())}},{key:"moveUp",value:function(){this.slideUp()&&(this.addRandomNumber(),this.renderCells())}},{key:"moveDown",value:function(){this.slideDown()&&(this.addRandomNumber(),this.renderCells())}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=this.createEmptyBoard(),this.status="playing",this.score=0,this.updateScore(),this.addRandomNumber(),this.addRandomNumber(),this.renderCells(),this.updateMessage()}},{key:"restart",value:function(){this.start()}},{key:"createEmptyBoard",value:function(){var e=this;return Array.from({length:this.size},function(){return Array(e.size).fill(n)})}},{key:"getEmptyCells",value:function(){for(var e=[],t=0;t<this.size;t++)for(var r=0;r<this.size;r++)this.board[t][r]===n&&e.push({row:t,cell:r});return e}},{key:"addRandomNumber",value:function(){var e=this.getEmptyCells();if(0===e.length)return this.board;var t=Math.floor(Math.random()*e.length),r=Math.random()<u?o.TWO:o.FOUR,s=e[t],i=s.row,a=s.cell;return this.board[i][a]=r,this.board}},{key:"renderCells",value:function(){for(var e=document.querySelector(".game-field"),t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var s=this.board[t][r]>0?this.board[t][r]:"";e.rows[t].cells[r].classList.value="field-cell",e.rows[t].cells[r].textContent=s,s>0&&e.rows[t].cells[r].classList.add("field-cell--".concat(s))}}},{key:"slide",value:function(e){for(var t=e.filter(function(e){return 0!==e}),r=0;r<t.length-1;r++)t[r]===t[r+1]&&(t[r]*=2,t[r+1]=0,this.updateScore(t[r]));for(t=t.filter(function(e){return 0!==e});t.length<this.size;)t.push(0);return t}},{key:"slideLeft",value:function(){for(var e=this.board.map(function(e){return i(e)}),t=0;t<this.size;t++){var r=this.slide(this.board[t]);this.board[t]=r}return JSON.stringify(e)!==JSON.stringify(this.board)}},{key:"slideRight",value:function(){for(var e=this.board.map(function(e){return i(e)}),t=0;t<this.size;t++){var r=this.slide(this.board[t].reverse());this.board[t]=r.reverse()}return JSON.stringify(e)!==JSON.stringify(this.board)}},{key:"slideUp",value:function(){for(var e=this.board.map(function(e){return i(e)}),t=0;t<this.size;t++){for(var r=[],s=0;s<this.size;s++)r.push(this.board[s][t]);for(var a=this.slide(r),n=0;n<this.size;n++)this.board[n][t]=a[n]}return JSON.stringify(e)!==JSON.stringify(this.board)}},{key:"slideDown",value:function(){for(var e=this.board.map(function(e){return i(e)}),t=0;t<this.size;t++){for(var r=[],s=0;s<this.size;s++)r.push(this.board[s][t]);for(var a=this.slide(r.reverse()).reverse(),n=0;n<this.size;n++)this.board[n][t]=a[n]}return JSON.stringify(e)!==JSON.stringify(this.board)}},{key:"updateScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.score+=e,document.querySelector(".game-score").textContent=this.score}},{key:"updateMessage",value:function(){this.checkStatus();var e=document.querySelector(".message-start"),t=document.querySelector(".message-lose"),r=document.querySelector(".message-win");switch(this.status){case"idle":e.classList.remove("hidden");break;case"playing":e.classList.add("hidden"),r.classList.add("hidden"),t.classList.add("hidden");break;case"win":r.classList.remove("hidden");break;case"lose":t.classList.remove("hidden")}}},{key:"canMerge",value:function(){for(var e=!1,t=0;t<this.size-1;t++)for(var r=0;r<this.size-1;r++)(this.board[t][r]===this.board[t][r+1]||this.board[t][r]===this.board[t+1][r])&&(e=!0);return e}},{key:"checkStatus",value:function(){return this.board.some(function(e){return e.includes(l)})&&(this.status=d.WIN),0!==this.getEmptyCells().length||this.canMerge()||(this.status=d.LOSE),this.status}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(t.prototype,e),t}()),h=document.querySelector(".start");h.addEventListener("click",function(e){h.classList.contains("start")&&c.start(),h.classList.contains("restart")&&c.restart(),h.classList.remove("start"),h.classList.add("restart"),h.textContent="Restart"}),document.addEventListener("keydown",function(e){if(c.getStatus()===r.PLAYING){switch(e.key){case t.LEFT:c.moveLeft();break;case t.RIGHT:c.moveRight();break;case t.UP:c.moveUp();break;case t.DOWN:c.moveDown()}c.updateMessage()}})}();
//# sourceMappingURL=index.2366f347.js.map
