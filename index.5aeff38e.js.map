{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/constants/constants.js","src/modules/Game.class.js"],"sourcesContent":["\"use strict\";\nvar $39941ed977047e1a$exports = {};\n\"use strict\";\nconst $39941ed977047e1a$var$BOARD_SIZE = 4;\nconst $39941ed977047e1a$var$EMPTY_CELL = 0;\nconst $39941ed977047e1a$var$NEW_TILE_VALUES = {\n    TWO: 2,\n    FOUR: 4\n};\nconst $39941ed977047e1a$var$PROBABILITY_TWO = 0.9;\nconst $39941ed977047e1a$var$WIN_TILE = 2048;\nconst $39941ed977047e1a$var$GAME_STATUS = {\n    IDLE: \"idle\",\n    PLAYING: \"playing\",\n    WIN: \"win\",\n    LOSE: \"lose\"\n};\nconst $39941ed977047e1a$var$KEY_CODES = {\n    LEFT: \"ArrowLeft\",\n    RIGHT: \"ArrowRight\",\n    UP: \"ArrowUp\",\n    DOWN: \"ArrowDown\"\n};\n$39941ed977047e1a$exports = {\n    BOARD_SIZE: $39941ed977047e1a$var$BOARD_SIZE,\n    EMPTY_CELL: $39941ed977047e1a$var$EMPTY_CELL,\n    NEW_TILE_VALUES: $39941ed977047e1a$var$NEW_TILE_VALUES,\n    PROBABILITY_TWO: $39941ed977047e1a$var$PROBABILITY_TWO,\n    WIN_TILE: $39941ed977047e1a$var$WIN_TILE,\n    GAME_STATUS: $39941ed977047e1a$var$GAME_STATUS,\n    KEY_CODES: $39941ed977047e1a$var$KEY_CODES\n};\n\n\nvar $09e991522ca7e64e$require$KEY_CODES = $39941ed977047e1a$exports.KEY_CODES;\nvar $09e991522ca7e64e$require$GAME_STATUS = $39941ed977047e1a$exports.GAME_STATUS;\nvar $a5fd07fa01589658$exports = {};\n/* eslint-disable max-len */ \"use strict\";\n\nvar $a5fd07fa01589658$require$BOARD_SIZE = $39941ed977047e1a$exports.BOARD_SIZE;\nvar $a5fd07fa01589658$require$EMPTY_CELL = $39941ed977047e1a$exports.EMPTY_CELL;\nvar $a5fd07fa01589658$require$NEW_TILE_VALUES = $39941ed977047e1a$exports.NEW_TILE_VALUES;\nvar $a5fd07fa01589658$require$PROBABILITY_TWO = $39941ed977047e1a$exports.PROBABILITY_TWO;\nvar $a5fd07fa01589658$require$WIN_TILE = $39941ed977047e1a$exports.WIN_TILE;\nvar $a5fd07fa01589658$require$GAME_STATUS = $39941ed977047e1a$exports.GAME_STATUS;\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"log\"] }] */ /**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */ class $a5fd07fa01589658$var$Game {\n    /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */ constructor(initialState){\n        this.size = $a5fd07fa01589658$require$BOARD_SIZE;\n        this.status = $a5fd07fa01589658$require$GAME_STATUS.IDLE;\n        this.score = 0;\n        this.board = initialState || this.createEmptyBoard();\n    }\n    moveLeft() {\n        const changed = this.slideLeft();\n        if (!changed) return;\n        this.addRandomNumber();\n        this.renderCells();\n    }\n    moveRight() {\n        const changed = this.slideRight();\n        if (!changed) return;\n        this.addRandomNumber();\n        this.renderCells();\n    }\n    moveUp() {\n        const changed = this.slideUp();\n        if (!changed) return;\n        this.addRandomNumber();\n        this.renderCells();\n    }\n    moveDown() {\n        const changed = this.slideDown();\n        if (!changed) return;\n        this.addRandomNumber();\n        this.renderCells();\n    }\n    /**\n   * @returns {number}\n   */ getScore() {\n        return this.score;\n    }\n    /**\n   * @returns {number[][]}\n   */ getState() {\n        return this.board;\n    }\n    /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */ getStatus() {\n        return this.status;\n    }\n    /**\n   * Starts the game.\n   */ start() {\n        this.board = this.createEmptyBoard();\n        this.status = \"playing\";\n        this.score = 0;\n        this.updateScore();\n        this.addRandomNumber();\n        this.addRandomNumber();\n        this.renderCells();\n        this.updateMessage();\n    }\n    /**\n   * Resets the game.\n   */ restart() {\n        this.start();\n    }\n    // Add your own methods here\n    createEmptyBoard() {\n        return Array.from({\n            length: this.size\n        }, ()=>Array(this.size).fill($a5fd07fa01589658$require$EMPTY_CELL));\n    }\n    getEmptyCells() {\n        const emptyCells = [];\n        for(let row = 0; row < this.size; row++){\n            for(let cell = 0; cell < this.size; cell++)if (this.board[row][cell] === $a5fd07fa01589658$require$EMPTY_CELL) emptyCells.push({\n                row: row,\n                cell: cell\n            });\n        }\n        return emptyCells;\n    }\n    addRandomNumber() {\n        const emptyCells = this.getEmptyCells();\n        if (emptyCells.length === 0) return this.board;\n        const randomIndex = Math.floor(Math.random() * emptyCells.length);\n        // eslint-disable-next-line max-len\n        const randomNumber = Math.random() < $a5fd07fa01589658$require$PROBABILITY_TWO ? $a5fd07fa01589658$require$NEW_TILE_VALUES.TWO : $a5fd07fa01589658$require$NEW_TILE_VALUES.FOUR;\n        const { row: row, cell: cell } = emptyCells[randomIndex];\n        this.board[row][cell] = randomNumber;\n        return this.board;\n    }\n    renderCells() {\n        const table = document.querySelector(\".game-field\");\n        for(let row = 0; row < this.size; row++)for(let cell = 0; cell < this.size; cell++){\n            const value = this.board[row][cell] > 0 ? this.board[row][cell] : \"\";\n            table.rows[row].cells[cell].classList.value = `field-cell`;\n            table.rows[row].cells[cell].textContent = value;\n            if (value > 0) table.rows[row].cells[cell].classList.add(`field-cell--${value}`);\n        }\n    }\n    slide(row) {\n        let newRow = row.filter((r)=>r !== 0);\n        for(let r = 0; r < newRow.length - 1; r++)if (newRow[r] === newRow[r + 1]) {\n            newRow[r] *= 2;\n            newRow[r + 1] = 0;\n            this.updateScore(newRow[r]);\n        }\n        newRow = newRow.filter((r)=>r !== 0);\n        while(newRow.length < this.size)newRow.push(0);\n        return newRow;\n    }\n    slideLeft() {\n        const prevBoard = this.board.map((row)=>[\n                ...row\n            ]);\n        for(let r = 0; r < this.size; r++){\n            const row = this.slide(this.board[r]);\n            this.board[r] = row;\n        }\n        const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n        return changed;\n    }\n    slideRight() {\n        const prevBoard = this.board.map((row)=>[\n                ...row\n            ]);\n        for(let r = 0; r < this.size; r++){\n            const row = this.slide(this.board[r].reverse());\n            this.board[r] = row.reverse();\n        }\n        const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n        return changed;\n    }\n    slideUp() {\n        const prevBoard = this.board.map((row)=>[\n                ...row\n            ]);\n        for(let c = 0; c < this.size; c++){\n            const row = [];\n            for(let r = 0; r < this.size; r++)row.push(this.board[r][c]);\n            const newRow = this.slide(row);\n            for(let r = 0; r < this.size; r++)this.board[r][c] = newRow[r];\n        }\n        const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n        return changed;\n    }\n    slideDown() {\n        const prevBoard = this.board.map((row)=>[\n                ...row\n            ]);\n        for(let c = 0; c < this.size; c++){\n            const row = [];\n            for(let r = 0; r < this.size; r++)row.push(this.board[r][c]);\n            const newRow = this.slide(row.reverse()).reverse();\n            for(let r = 0; r < this.size; r++)this.board[r][c] = newRow[r];\n        }\n        const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n        return changed;\n    }\n    updateScore(add = 0) {\n        this.score += add;\n        document.querySelector(\".game-score\").textContent = this.score;\n    }\n    updateMessage() {\n        this.checkStatus();\n        const start = document.querySelector(\".message-start\");\n        const lose = document.querySelector(\".message-lose\");\n        const win = document.querySelector(\".message-win\");\n        switch(this.status){\n            case \"idle\":\n                start.classList.remove(\"hidden\");\n                break;\n            case \"playing\":\n                start.classList.add(\"hidden\");\n                win.classList.add(\"hidden\");\n                lose.classList.add(\"hidden\");\n                break;\n            case \"win\":\n                win.classList.remove(\"hidden\");\n                break;\n            case \"lose\":\n                lose.classList.remove(\"hidden\");\n                break;\n        }\n    }\n    canMerge() {\n        let canMerge = false;\n        for(let r = 0; r < this.size - 1; r++){\n            for(let c = 0; c < this.size - 1; c++)if (this.board[r][c] === this.board[r][c + 1] || this.board[r][c] === this.board[r + 1][c]) canMerge = true;\n        }\n        return canMerge;\n    }\n    checkStatus() {\n        if (this.board.some((row)=>row.includes($a5fd07fa01589658$require$WIN_TILE))) this.status = $a5fd07fa01589658$require$GAME_STATUS.WIN;\n        if (this.getEmptyCells().length === 0 && !this.canMerge()) this.status = $a5fd07fa01589658$require$GAME_STATUS.LOSE;\n        return this.status;\n    }\n}\n$a5fd07fa01589658$exports = $a5fd07fa01589658$var$Game;\n\n\nconst $09e991522ca7e64e$var$game = new $a5fd07fa01589658$exports();\nconst $09e991522ca7e64e$var$startButton = document.querySelector(\".start\");\n$09e991522ca7e64e$var$startButton.addEventListener(\"click\", (e)=>{\n    if ($09e991522ca7e64e$var$startButton.classList.contains(\"start\")) $09e991522ca7e64e$var$game.start();\n    if ($09e991522ca7e64e$var$startButton.classList.contains(\"restart\")) $09e991522ca7e64e$var$game.restart();\n    $09e991522ca7e64e$var$startButton.classList.remove(\"start\");\n    $09e991522ca7e64e$var$startButton.classList.add(\"restart\");\n    $09e991522ca7e64e$var$startButton.textContent = \"Restart\";\n});\ndocument.addEventListener(\"keydown\", (e)=>{\n    const currentStatus = $09e991522ca7e64e$var$game.getStatus();\n    if (currentStatus !== $09e991522ca7e64e$require$GAME_STATUS.PLAYING) return;\n    switch(e.key){\n        case $09e991522ca7e64e$require$KEY_CODES.LEFT:\n            $09e991522ca7e64e$var$game.moveLeft();\n            break;\n        case $09e991522ca7e64e$require$KEY_CODES.RIGHT:\n            $09e991522ca7e64e$var$game.moveRight();\n            break;\n        case $09e991522ca7e64e$require$KEY_CODES.UP:\n            $09e991522ca7e64e$var$game.moveUp();\n            break;\n        case $09e991522ca7e64e$require$KEY_CODES.DOWN:\n            $09e991522ca7e64e$var$game.moveDown();\n            break;\n    }\n    $09e991522ca7e64e$var$game.updateMessage();\n});\n\n\n//# sourceMappingURL=index.5aeff38e.js.map\n","'use strict';\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"log\"] }] */\n\nconst { KEY_CODES, GAME_STATUS } = require('../constants/constants');\nconst Game = require('../modules/Game.class');\nconst game = new Game();\nconst startButton = document.querySelector('.start');\n\nstartButton.addEventListener('click', (e) => {\n  if (startButton.classList.contains('start')) {\n    game.start();\n  }\n\n  if (startButton.classList.contains('restart')) {\n    game.restart();\n  }\n\n  startButton.classList.remove('start');\n  startButton.classList.add('restart');\n  startButton.textContent = 'Restart';\n});\n\ndocument.addEventListener('keydown', (e) => {\n  const currentStatus = game.getStatus();\n\n  if (currentStatus !== GAME_STATUS.PLAYING) {\n    return;\n  }\n\n  switch (e.key) {\n    case KEY_CODES.LEFT:\n      game.moveLeft();\n      break;\n    case KEY_CODES.RIGHT:\n      game.moveRight();\n      break;\n    case KEY_CODES.UP:\n      game.moveUp();\n      break;\n    case KEY_CODES.DOWN:\n      game.moveDown();\n      break;\n  }\n  game.updateMessage();\n});\n","'use strict';\n\nconst BOARD_SIZE = 4;\nconst EMPTY_CELL = 0;\n\nconst NEW_TILE_VALUES = {\n  TWO: 2,\n  FOUR: 4,\n};\n\nconst PROBABILITY_TWO = 0.9;\n\nconst WIN_TILE = 2048;\n\nconst GAME_STATUS = {\n  IDLE: 'idle',\n  PLAYING: 'playing',\n  WIN: 'win',\n  LOSE: 'lose',\n};\n\nconst KEY_CODES = {\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n  UP: 'ArrowUp',\n  DOWN: 'ArrowDown',\n};\n\nmodule.exports = {\n  BOARD_SIZE,\n  EMPTY_CELL,\n  NEW_TILE_VALUES,\n  PROBABILITY_TWO,\n  WIN_TILE,\n  GAME_STATUS,\n  KEY_CODES,\n};\n","/* eslint-disable max-len */\n'use strict';\n\nconst {\n  BOARD_SIZE,\n  EMPTY_CELL,\n  NEW_TILE_VALUES,\n  PROBABILITY_TWO,\n  WIN_TILE,\n  GAME_STATUS,\n} = require('../constants/constants');\n\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"log\"] }] */\n\n/**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */\nclass Game {\n  /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */\n  constructor(initialState) {\n    this.size = BOARD_SIZE;\n    this.status = GAME_STATUS.IDLE;\n    this.score = 0;\n    this.board = initialState || this.createEmptyBoard();\n  }\n\n  moveLeft() {\n    const changed = this.slideLeft();\n\n    if (!changed) {\n      return;\n    }\n    this.addRandomNumber();\n    this.renderCells();\n  }\n\n  moveRight() {\n    const changed = this.slideRight();\n\n    if (!changed) {\n      return;\n    }\n    this.addRandomNumber();\n    this.renderCells();\n  }\n\n  moveUp() {\n    const changed = this.slideUp();\n\n    if (!changed) {\n      return;\n    }\n    this.addRandomNumber();\n    this.renderCells();\n  }\n\n  moveDown() {\n    const changed = this.slideDown();\n\n    if (!changed) {\n      return;\n    }\n    this.addRandomNumber();\n    this.renderCells();\n  }\n\n  /**\n   * @returns {number}\n   */\n  getScore() {\n    return this.score;\n  }\n\n  /**\n   * @returns {number[][]}\n   */\n  getState() {\n    return this.board;\n  }\n\n  /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */\n  getStatus() {\n    return this.status;\n  }\n\n  /**\n   * Starts the game.\n   */\n  start() {\n    this.board = this.createEmptyBoard();\n    this.status = 'playing';\n    this.score = 0;\n    this.updateScore();\n    this.addRandomNumber();\n    this.addRandomNumber();\n    this.renderCells();\n    this.updateMessage();\n  }\n\n  /**\n   * Resets the game.\n   */\n  restart() {\n    this.start();\n  }\n\n  // Add your own methods here\n\n  createEmptyBoard() {\n    return Array.from({ length: this.size }, () => Array(this.size).fill(EMPTY_CELL));\n  }\n\n  getEmptyCells() {\n    const emptyCells = [];\n\n    for (let row = 0; row < this.size; row++) {\n      for (let cell = 0; cell < this.size; cell++) {\n        if (this.board[row][cell] === EMPTY_CELL) {\n          emptyCells.push({\n            row, cell,\n          });\n        }\n      }\n    }\n\n    return emptyCells;\n  }\n\n  addRandomNumber() {\n    const emptyCells = this.getEmptyCells();\n\n    if (emptyCells.length === 0) {\n      return this.board;\n    }\n\n    const randomIndex = Math.floor(Math.random() * emptyCells.length);\n    // eslint-disable-next-line max-len\n    const randomNumber = Math.random() < PROBABILITY_TWO ? NEW_TILE_VALUES.TWO : NEW_TILE_VALUES.FOUR;\n    const { row, cell } = emptyCells[randomIndex];\n\n    this.board[row][cell] = randomNumber;\n\n    return this.board;\n  }\n\n  renderCells() {\n    const table = document.querySelector('.game-field');\n\n    for (let row = 0; row < this.size; row++) {\n      for (let cell = 0; cell < this.size; cell++) {\n        const value = this.board[row][cell] > 0 ? this.board[row][cell] : '';\n\n        table.rows[row].cells[cell].classList.value = `field-cell`;\n\n        table.rows[row].cells[cell].textContent = value;\n\n        if (value > 0) {\n          table.rows[row].cells[cell].classList.add(`field-cell--${value}`);\n        }\n      }\n    }\n  }\n\n  slide(row) {\n    let newRow = row.filter((r) => r !== 0);\n\n    for (let r = 0; r < newRow.length - 1; r++) {\n      if (newRow[r] === newRow[r + 1]) {\n        newRow[r] *= 2;\n        newRow[r + 1] = 0;\n        this.updateScore(newRow[r]);\n      }\n    }\n    newRow = newRow.filter((r) => r !== 0);\n\n    while (newRow.length < this.size) {\n      newRow.push(0);\n    }\n\n    return newRow;\n  }\n\n  slideLeft() {\n    const prevBoard = this.board.map((row) => [...row]);\n\n    for (let r = 0; r < this.size; r++) {\n      const row = this.slide(this.board[r]);\n\n      this.board[r] = row;\n    }\n\n    const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n\n    return changed;\n  }\n\n  slideRight() {\n    const prevBoard = this.board.map((row) => [...row]);\n\n    for (let r = 0; r < this.size; r++) {\n      const row = this.slide(this.board[r].reverse());\n\n      this.board[r] = row.reverse();\n    }\n\n    const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n\n    return changed;\n  }\n\n  slideUp() {\n    const prevBoard = this.board.map((row) => [...row]);\n\n    for (let c = 0; c < this.size; c++) {\n      const row = [];\n\n      for (let r = 0; r < this.size; r++) {\n        row.push(this.board[r][c]);\n      }\n\n      const newRow = this.slide(row);\n\n      for (let r = 0; r < this.size; r++) {\n        this.board[r][c] = newRow[r];\n      }\n    }\n\n    const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n\n    return changed;\n  }\n\n  slideDown() {\n    const prevBoard = this.board.map((row) => [...row]);\n\n    for (let c = 0; c < this.size; c++) {\n      const row = [];\n\n      for (let r = 0; r < this.size; r++) {\n        row.push(this.board[r][c]);\n      }\n\n      const newRow = this.slide(row.reverse()).reverse();\n\n      for (let r = 0; r < this.size; r++) {\n        this.board[r][c] = newRow[r];\n      }\n    }\n\n    const changed = JSON.stringify(prevBoard) !== JSON.stringify(this.board);\n\n    return changed;\n  }\n\n  updateScore(add = 0) {\n    this.score += add;\n\n    document.querySelector('.game-score').textContent = this.score;\n  }\n\n  updateMessage() {\n    this.checkStatus();\n\n    const start = document.querySelector('.message-start');\n    const lose = document.querySelector('.message-lose');\n    const win = document.querySelector('.message-win');\n\n    switch (this.status) {\n      case 'idle':\n        start.classList.remove('hidden');\n        break;\n      case 'playing':\n        start.classList.add('hidden');\n        win.classList.add('hidden');\n        lose.classList.add('hidden');\n        break;\n      case 'win':\n        win.classList.remove('hidden');\n        break;\n      case 'lose':\n        lose.classList.remove('hidden');\n        break;\n    }\n  }\n\n  canMerge() {\n    let canMerge = false;\n\n    for (let r = 0; r < this.size - 1; r++) {\n      for (let c = 0; c < this.size - 1; c++) {\n        if (\n          this.board[r][c] === this.board[r][c + 1]\n          || this.board[r][c] === this.board[r + 1][c]\n        ) {\n          canMerge = true;\n        }\n      }\n    }\n\n    return canMerge;\n  }\n\n  checkStatus() {\n    if (this.board.some((row) => row.includes(WIN_TILE))) {\n      this.status = GAME_STATUS.WIN;\n    }\n\n    if (this.getEmptyCells().length === 0 && !this.canMerge()) {\n      this.status = GAME_STATUS.LOSE;\n    }\n\n    return this.status;\n  }\n}\n\nmodule.exports = Game;\n"],"names":["$39941ed977047e1a$exports","$09e991522ca7e64e$require$KEY_CODES","BOARD_SIZE","EMPTY_CELL","NEW_TILE_VALUES","TWO","FOUR","PROBABILITY_TWO","WIN_TILE","GAME_STATUS","IDLE","PLAYING","WIN","LOSE","KEY_CODES","LEFT","RIGHT","UP","DOWN","$09e991522ca7e64e$require$GAME_STATUS","$a5fd07fa01589658$require$BOARD_SIZE","$a5fd07fa01589658$require$EMPTY_CELL","$a5fd07fa01589658$require$NEW_TILE_VALUES","$a5fd07fa01589658$require$PROBABILITY_TWO","$a5fd07fa01589658$require$WIN_TILE","$a5fd07fa01589658$require$GAME_STATUS","$09e991522ca7e64e$var$game","constructor","initialState","size","status","score","board","createEmptyBoard","moveLeft","slideLeft","addRandomNumber","renderCells","moveRight","slideRight","moveUp","slideUp","moveDown","slideDown","getScore","getState","getStatus","start","updateScore","updateMessage","restart","Array","from","length","fill","getEmptyCells","emptyCells","row","cell","push","randomIndex","Math","floor","random","randomNumber","table","document","querySelector","value","rows","cells","classList","textContent","add","slide","newRow","filter","r","prevBoard","map","JSON","stringify","reverse","c","checkStatus","lose","win","remove","canMerge","some","includes","$09e991522ca7e64e$var$startButton","addEventListener","e","contains","currentStatus","key"],"version":3,"file":"index.5aeff38e.js.map"}